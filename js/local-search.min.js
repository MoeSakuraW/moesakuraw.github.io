/*!
 * Hexo Theme Suka | local-search.js
 * Author: SukkaW
 * Link: https://github.com/SukkaW/hexo-theme-suka
 * License: GPL-3.0
 */
!function(){window.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null==t?"":decodeURIComponent(t[1])};var e=window.getParameterByName("s");window.searchEscape=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return e.replace(/[&<>"'/]/g,(function(e){return t[e]}))},window.searchFunc=function(t,n){"use strict";fetch(t).then((function(e){return e.json()})).then((function(t){var r=document.getElementById("search-output"),a=document.getElementById("search-result-num"),i=document.getElementById("search-result-info"),o=[];void 0!==e&&(function(e){var c=function(){var t=e.trim().toLowerCase().split(/[\s\-]+/),n=[];for(var r in t){var a=t[r];if(-1<a.indexOf("+")){var i=a.split("+");for(var o in i)n.push(i[o])}else n.push(a)}return n}();window.searchKeyword=c;var s=0;if(r.innerHTML="",!(e.trim().length<=0)){t.forEach((function(t){if(void 0!==t.title&&void 0!==t.content){var n=!0,r=t.title.trim().toLowerCase(),a=new Date(t.date).toLocaleDateString(),i=void 0!==t.tags?t.tags:[],l=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),u=-1,d=-1,f=-1,v=-1,p=0;if(""!==r&&""!==l&&c.forEach((function(e,t){u=r.indexOf(e),d=i.indexOf(e),f=l.indexOf(e),u<0&&d<0&&f<0?n=!1:(0<=u&&(p+=4),0<=d&&(p+=2),0<=f&&(p+=1),0===t&&(v=f),s++)})),n){var h="";h+='<div class="tile"><div class="tile-content">';var g=t.title;c.forEach((function(e){var t=new RegExp(e,"gi");g=g.replace(t,"<strong><mark>"+window.searchEscape(e)+"</mark></strong>")})),h+='<a href="'+t.url+'"><p class="tile-title search-result-title">'+g+"</p></a>",h+='<p class="text-gray search-result-summary">',h+='<span class="saerch-result-date">'+a+"</span>";var m=t.content;if(0<=v){var w=v-15,E=v+20;w<0&&(w=0),0===w&&(E=20),E>m.length&&(E=m.length-20);var y=m.substr(w,E);c.forEach((function(t){var n=new RegExp(t,"gi");y=y.replace(n,"<strong><mark>"+window.searchEscape(e)+"</mark></strong>")})),h+=y+"...</p>"}h+="</div></div>",o.push([h,p])}}}));var l=function(){var e="";for(var t in o.sort((function(e,t){return t[1]-e[1]})),o)e+=o[t][0];return e}();a.appendChild(document.createTextNode(o.length)),s<=0?(i.style.display="none",r.innerHTML=n):(i.style.display="block",r.innerHTML=l)}}(e),document.getElementById("search-field").setAttribute("value",e))}))}}();